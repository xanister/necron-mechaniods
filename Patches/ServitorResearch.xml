<?xml version="1.0" encoding="utf-8"?>
<Patch>
  <!-- Update all mechanoid-related research to be about servitors -->
  
  <!-- BasicMechtech -> Basic Servitor Tech -->
  <Operation Class="PatchOperationReplace">
    <xpath>Defs/ResearchProjectDef[defName="BasicMechtech"]/label</xpath>
    <value>
      <label>basic cybernetica tech</label>
    </value>
  </Operation>
  
  <Operation Class="PatchOperationReplace">
    <xpath>Defs/ResearchProjectDef[defName="BasicMechtech"]/description</xpath>
    <value>
      <description>The sacred knowledge required for a tech-priest to construct and command basic servo skulls and servitor units. This foundational research unlocks the binharic protocols needed to interface with the machine-spirits of cybernetica constructs.</description>
    </value>
  </Operation>
  
  <!-- StandardMechtech -> Standard Servitor Tech -->
  <Operation Class="PatchOperationReplace">
    <xpath>Defs/ResearchProjectDef[defName="StandardMechtech"]/label</xpath>
    <value>
      <label>standard cybernetica tech</label>
    </value>
  </Operation>
  
  <!-- HighMechtech -> High Servitor Tech -->
  <Operation Class="PatchOperationReplace">
    <xpath>Defs/ResearchProjectDef[defName="HighMechtech"]/label</xpath>
    <value>
      <label>high cybernetica tech</label>
    </value>
  </Operation>
  
  <!-- UltraMechtech -> Ultra Servitor Tech -->
  <Operation Class="PatchOperationReplace">
    <xpath>Defs/ResearchProjectDef[defName="UltraMechtech"]/label</xpath>
    <value>
      <label>ultra cybernetica tech</label>
    </value>
  </Operation>
  
  <!-- WastepackAtomizer -> Update description to be servitor-themed -->
  <Operation Class="PatchOperationReplace">
    <xpath>Defs/ResearchProjectDef[defName="WastepackAtomizer"]/label</xpath>
    <value>
      <label>wastepack atomizer</label>
    </value>
  </Operation>
  
  <Operation Class="PatchOperationReplace">
    <xpath>Defs/ResearchProjectDef[defName="WastepackAtomizer"]/description</xpath>
    <value>
      <description>Construct wastepack atomizers which can safely dispose of toxic wastepacks generated by cybernetica recharging stations. These sanctified devices decompose waste at the molecular level through sacred binharic rites, purifying the toxic byproducts of cybernetica power cycles.</description>
    </value>
  </Operation> 
  
  <!-- Remove from MechGestator (light mech gestator) -->
  <!-- Militor - Not replaced -->
  <Operation Class="PatchOperationRemove">
    <xpath>Defs/ThingDef[defName="MechGestator"]/recipes/li[. = "Militor"]</xpath>
  </Operation>
  
  <!-- Remove from LargeMechGestator (medium/heavy/superheavy mech gestator) -->
  <!-- Medium mechs - All not replaced -->
  <Operation Class="PatchOperationRemove">
    <xpath>Defs/ThingDef[defName="LargeMechGestator"]/recipes/li[. = "Scyther"]</xpath>
  </Operation>
  
  <Operation Class="PatchOperationRemove">
    <xpath>Defs/ThingDef[defName="LargeMechGestator"]/recipes/li[. = "Lancer"]</xpath>
  </Operation>
  
  <Operation Class="PatchOperationRemove">
    <xpath>Defs/ThingDef[defName="LargeMechGestator"]/recipes/li[. = "Pikeman"]</xpath>
  </Operation>
  
  <Operation Class="PatchOperationRemove">
    <xpath>Defs/ThingDef[defName="LargeMechGestator"]/recipes/li[. = "Scorcher"]</xpath>
  </Operation>
  
  <Operation Class="PatchOperationRemove">
    <xpath>Defs/ThingDef[defName="LargeMechGestator"]/recipes/li[. = "Tesseron"]</xpath>
  </Operation>
  
  <Operation Class="PatchOperationRemove">
    <xpath>Defs/ThingDef[defName="LargeMechGestator"]/recipes/li[. = "Legionary"]</xpath>
  </Operation>
  
  <Operation Class="PatchOperationRemove">
    <xpath>Defs/ThingDef[defName="LargeMechGestator"]/recipes/li[. = "CentipedeBlaster"]</xpath>
  </Operation>
  
  <!-- Heavy mechs - Not replaced (Tunneler is replaced, so we skip it) -->
  <Operation Class="PatchOperationRemove">
    <xpath>Defs/ThingDef[defName="LargeMechGestator"]/recipes/li[. = "CentipedeGunner"]</xpath>
  </Operation>
  
  <Operation Class="PatchOperationRemove">
    <xpath>Defs/ThingDef[defName="LargeMechGestator"]/recipes/li[. = "CentipedeBurner"]</xpath>
  </Operation>
  
  <Operation Class="PatchOperationRemove">
    <xpath>Defs/ThingDef[defName="LargeMechGestator"]/recipes/li[. = "Diabolus"]</xpath>
  </Operation>
  
  <!-- Superheavy mechs - All not replaced -->
  <Operation Class="PatchOperationRemove">
    <xpath>Defs/ThingDef[defName="LargeMechGestator"]/recipes/li[. = "Warqueen"]</xpath>
  </Operation>
  
  <Operation Class="PatchOperationRemove">
    <xpath>Defs/ThingDef[defName="LargeMechGestator"]/recipes/li[. = "Centurion"]</xpath>
  </Operation>
  
  <!-- Cyclops - Uses recipeUsers instead of building recipe list (Odyssey DLC) -->
  <Operation Class="PatchOperationRemove">
    <xpath>Defs/RecipeDef[defName="Cyclops"]/recipeUsers/li[. = "LargeMechGestator"]</xpath>
  </Operation>
</Patch>

